# Spec for building DSAM RPM Packages

# Note that this is NOT a relocatable package
%define prefix	/usr
%define ver		@AMS_VERSION@
%define RELEASE @RPM_AGE@
%define rel		%{?CUSTOM_RELEASE} %{!?CUSTOM_RELEASE:%RELEASE}

Name: ams
Summary: Auditory Model Simulator 
Version: %{ver}
Release: %{rel}
Copyright: Centre for the Neural Basis of Hearing, UK, Earth.
Group: Applications/Scientific
Source: ftp://ftp.essex.ac.uk/pub/omard/dsam/%{name}-%{ver}.tar.gz
URL: http://www.essex.ac.uk/psychology/hearinglab/dsam
Packager: Lowel P. O'Mard <lowel@essex.ac.uk> 
Requires: dsam
BuildRoot: %{_tmppath}/%{name}-root
Obsoletes: ams

%description
The Auditory Model Simulator (AMS) allows users to design, run and evaluate
auditory models.  It is backed up by the extensive collection of published and
new models supplied by the Development System for Auditory Modelling (DSAM).

%changelog
* Wed Mar 31 2000 Lowel P. O'Mard <lowel@essex.ac.uk>
- Initial skeleton, based on the .specs dsam-2.2.25

%prep
%setup
AMS_FLAGS="--prefix=%{prefix}"
%configure $AMS_FLAGS

%build
# Needed for snapshot releases.
if [ "$SMP" != "" ]; then
  export MAKE="make -j$SMP"
else
  export MAKE="make"
fi
$MAKE

%install
[ -n "$RPM_BUILD_ROOT" -a "$RPM_BUILD_ROOT" != / ] && rm -rf $RPM_BUILD_ROOT
rm -rf $RPM_BUILD_ROOT

%makeinstall

%post

%postun

%preun

%clean
[ -n "$RPM_BUILD_ROOT" -a "$RPM_BUILD_ROOT" != / ] && rm -rf $RPM_BUILD_ROOT

%files
%defattr(-, root, root)

%doc AUTHORS COPYING README NEWS ChangeLog
%{_datadir}/%{name}/DEFAULT/*
%{_datadir}/%{name}/HelpFiles/*
%{_bindir}/*


